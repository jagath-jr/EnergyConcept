<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Services-Energy Concept </title>
    <link rel="icon" type="image/x-icon" href="assets/images/titleimg.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="assets/css/common.css" />
    <link rel="stylesheet" href="assets/css/services.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>
  <div id="header-placeholder"></div>

    <section class="services-hero">
            <img class="services-hero__image" src="assets/images/our-service-images/ourservices-herosection.webp" alt="" aria-hidden="true">
            <div class="banner" data-aos="fade-down">
                <h2 class="caption">Our Services</h2>
            </div>
        </section>

    <section class="content-section text-center">
        <div class="container">
            <p>
                We provide end-to-end MEP and construction services, including HVAC, electrical, plumbing, and civil works â€” ensuring quality, reliability, and efficiency in every project across the UAE.
            </p>
        </div>
    </section>
 <main class="page-main_electrical" id="dynamic-content">
        </main>
    
    
<!-- Footer will load here -->
<div id="common-footer"></div>


    <script src="assets/js/main.js"></script>
      <script src="assets/js/common.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({
    duration: 1000,
    once: true,
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    gsap.registerPlugin(ScrollTrigger);
    
    const mainContainer = document.getElementById('dynamic-content');

    // Fetch Data
    fetch('assets/data/services.json')
        .then(res => {
            if (!res.ok) throw new Error('Network response was not ok');
            return res.json();
        })
        .then(data => {
            // Render HTML
            data.forEach((serviceGroup, index) => {
                // HERE IS THE CHANGE: added id="${serviceGroup.id}" to the section tag
                const sectionHTML = `
                <section id="${serviceGroup.id}" class="page-main_hero-section section-group-${index}">
                    <div class="page-main_container">
                        <div class="header-animate-${index}">
                            <h1 class="page-main_h1">${serviceGroup.mainService}</h1>
                            <p class="page-main_intro">${serviceGroup.mainDescription}</p>
                        </div>
                        
                        <div class="page-main_grid" id="grid-${index}">
                            ${serviceGroup.subParts.map(sub => `
                                <article class="page-main_card card-group-${index}">
                                    <div class="page-main_img-box">
                                        <img src="${sub.img}" alt="${sub.alt}" loading="lazy">
                                    </div>
                                    <div class="page-main_content">
                                        <h2 class="page-main_h2">${sub.title}</h2>
                                        <p class="page-main_p">${sub.desc}</p>
                                    </div>
                                </article>
                            `).join('')}
                        </div>
                    </div>
                </section>
                ${index !== data.length - 1 ? '<hr class="section-divider">' : ''}
                `;
                
                mainContainer.innerHTML += sectionHTML;
            });

            // Trigger Animations
            initAnimations(data.length);
            
            // NEW: Check if there is a hash in the URL (e.g., #electrical-services) and scroll to it
            if(window.location.hash) {
                const targetId = window.location.hash.substring(1);
                setTimeout(() => {
                    const targetElement = document.getElementById(targetId);
                    if(targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 500); // Small delay to ensure content is rendered
            }
        })
        .catch(error => console.error('Error loading services:', error));


    // Animation Function
// Animation Function
    function initAnimations(count) {
        // Check if it is mobile
        const isMobile = window.matchMedia("(max-width: 768px)").matches;

        for (let i = 0; i < count; i++) {
            
            // 1. Animate Section Title & Description
            gsap.from(`.header-animate-${i}`, {
                scrollTrigger: {
                    trigger: `.section-group-${i}`,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                },
                y: 30,
                opacity: 0,
                duration: 0.8,
                ease: "power3.out"
            });

            // 2. Animate Cards
            // On mobile, we reduce the movement (y) to prevent layout shifting in the slider
            gsap.to(`.card-group-${i}`, {
                scrollTrigger: {
                    trigger: `#grid-${i}`,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                },
                opacity: 1,
                y: 0,
                duration: 0.6,
                stagger: isMobile ? 0.1 : 0.15, // Faster stagger on mobile
                ease: "power2.out",
                // Important: clear transform properties after animation to fix any slider blurriness
                onComplete: function() {
                    if(isMobile) {
                        gsap.set(this.targets(), { clearProps: "transform" });
                    }
                }
            });
        }
    }
  });
</script>
</body>
</html>
